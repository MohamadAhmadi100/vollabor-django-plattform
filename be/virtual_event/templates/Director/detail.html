{% extends "dashboard/base.html" %}
{% load static %}
{% load crispy_forms_tags %}
<html lang="en">

{% block css %}
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'workshop/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'workshop/css/all.min.cs' %}">
    <link rel="stylesheet" href="{% static 'workshop/css/ws-details.css' %}">
    <title>Document</title>
{% endblock css %}



{% block content %}


<section class="bg-dark">
	<div class="container py-4">
		<h1 class="h1 text-center texh-white" id="pageHeaderTitle">Virtual event detail</h1>

		<article class="postcard dark ">

			<div class="postcard__text">
				<h3 class="postcard__title text-success">{{object.type}} title</h3>
				
				<div class="postcard__preview-txt text-white">{{object.title}}</div>
				
			</div>
		</article>
		<div class="row">
		    {% comment %} <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
		        <article class="postcard dark">
        			<div class="postcard__text">
        				<h3 class="postcard__title text-success">Presentation file</h3>
        			
        				<div class="postcard__preview-txt text-white">
        				    {% if workshop.load_pdf != ""%}
                                <a href="{{workshop.load_pdf.url}}" class="m-0">    Download file  </a>
                            {% else %}
                                <div><a>Workshop has no file</a></div>
                            {% endif %}
        				    
        				    
        				</div>
        				
        			</div>
		        </article>
		        
		    </div> {% endcomment %}

		    
		    
		    
		</div>

		<article class="postcard dark">
			<div class="postcard__text">
				<h3 class="postcard__title text-success"><a href="#">{{object.type}} Description</a></h3>
				
				<div class="postcard__preview-txt text-white">{{object.object.description}}</div>
				
			</div>
		</article>
		
		<div class="row">
		    <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
		        <article class="postcard dark">
        			<div class="postcard__text">
        				<h3 class="postcard__title text-success"><a href="#">Main field</a></h3>
        				{%for mainfield in object.main_field.all%}
                            <div class="postcard__preview-txt text-white">{{mainfield}}</div>
                        {%endfor%}
        				
        			</div>
		        </article>
		        
		    </div>
		    <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
		        <article class="postcard dark">
        			<div class="postcard__text">
        				<h3 class="postcard__title text-success"><a href="#">Subfield</a></h3>
        				
        				{%for mainfield in object.sub_field.all%}
                            <div class="postcard__preview-txt text-white">{{mainfield}}</div>
                        {%endfor%}
        				
        			</div>
		        </article>
		        
		    </div>
		    

		    
		    
		</div>
		
		<div class="row">
		    <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12">
		        <article class="postcard dark">
        			<div class="postcard__text">
        				<h3 class="postcard__title text-success"><a href="#">Holding date</a></h3>
        				
        				<div class="postcard__preview-txt text-white">{{object.created}}</div>
        				
        			</div>
		        </article>
		        
		    </div>
		    <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12">
		        <article class="postcard dark">
        			<div class="postcard__text">
        				<h3 class="postcard__title text-success"><a href="#">Start date</a></h3>
        				
        				<div class="postcard__preview-txt text-white">{{object.start_date}}</div>
        				
        			</div>
		        </article>
		        
		    </div>
		    
		    <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12">
		        <article class="postcard dark ">
        			<div class="postcard__text">
        				<h3 class="postcard__title text-success"><a href="#">Duration</a></h3>
        				
        				<div class="postcard__preview-txt text-white">{{object.duration}} hours</div>
        				
        			</div>
		        </article>
		        
		    </div>
		    
		    
		</div>
		
		
		<div class="row">
		    <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12">
		        <article class="postcard dark">
        			<div class="postcard__text">
        				<h3 class="postcard__title text-success"><a href="#">Price per individual</a></h3>
        				
        				<div class="postcard__preview-txt text-white"> $ {{object.price}}</div>
        				
        			</div>
		        </article>
		        
		    </div>
		    <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12">
		        <article class="postcard dark">
        			<div class="postcard__text">
        				<h3 class="postcard__title text-success"><a href="#">Language</a></h3>
        				
        				<div class="postcard__preview-txt text-white">{{object.object.language}}</div>
        				
        			</div>
		        </article>
		        
		    </div>
		    {%if object.contract%}
			<div class="col-xl-4 col-lg-4 col-md-12 col-sm-12">
		        <article class="postcard dark ">
        			<div class="postcard__text">
        				<h3 class="postcard__title text-success"><a href="#">Contract</a></h3>
        				
        				<div class="postcard__preview-txt text-white">
                            <div><a class="btn btn-sm bt-warning" href="{{object.contract.url}}">View contract</a></div>       				    
        				</div>
        				
        			</div>
		        </article>
		        
		    </div> 
			{%endif%}
		
		    
		    
		</div>
		<div class="row">
		<article class="postcard dark">
			<div class="col-12 postcard__text">
				<h3 class="postcard__title text-success"><a href="#">Time table</a></h3>
				
				<div class="postcard__preview-txt">
				    <table class="table table-hover table-striped ">
				        <thead class="table-info">
				            <tr>
				                <th>Section title</th>
				                <th>Start date</th>
				                <th>Start time</th>
				                <th>End time</th>
				                <th>Duration</th>
				                <th>Price</th>
				                
				                
				            </tr>
				            
				            
				        </thead>
				        <tbody class="table-dark">
				            {% for time in object.time_table %}
				            <tr>
				                <td>{{time.title}}</td>
				                <td>{{time.start_date}}</td>
				                <td>{{time.start_time}}</td>
				                <td>{{time.end_time}}</td>
				                <td>{{time.duration}}</td>
				                <td>${{time.price}}</td>
				            </tr>
				            {% endfor %}
				        </tbody>
				        
				        
				        
				        
				        
				    </table>
				    
				    
				    
				</div>
				
			</div>
		</article>
		</div>




		<div class="row">
			<article class="postcard dark">
				<div class="col-12 postcard__text">
					<h3 class="postcard__title text-success"><a href="#">Tracking</a></h3>
					
					<div class="postcard__preview-txt">
						<table class="table table-hover table-sm table-striped ">
							<thead class="table-info">
								<tr>
									<th>Step</th>
									<th>Status</th>
									<th>Created</th>
									<th>Position</th>
									<th>Description</th>
									<th>comment</th>
									<th>is done?</th>
																		
								</tr>								
							</thead>
							<tbody class="table-dark">
								{% for track in object.tracking %}
								<tr>
									<td>{{forloop.counter}}</td>
									<td>{{track.status}}</td>
									<td>{{track.created}}</td>
									<td>{{track.position}}</td>
									<td>{{track.desc}}</td>
									{%if track.comment%}
									<td>{{track.comment|truncatechars:20}}</td>
									{%else%}
									<td></td>
									{%endif%}
									
										{% if track.is_done%}
											<td>
												<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
													<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
												  </svg>
											</td>
										{%else%}
										<td>
											<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hourglass-bottom" viewBox="0 0 16 16">
												<path d="M2 1.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1-.5-.5zm2.5.5v1a3.5 3.5 0 0 0 1.989 3.158c.533.256 1.011.791 1.011 1.491v.702s.18.149.5.149.5-.15.5-.15v-.7c0-.701.478-1.236 1.011-1.492A3.5 3.5 0 0 0 11.5 3V2h-7z"/>
										  	</svg>
										</td>
										{%endif%}
									
									
									
								</tr>
								{% endfor %}
							</tbody>	
						</table>						
					</div>					
				</div>
			</article>
		</div>







		
{% comment %} 
		{%if object.status == 'Reject' %}
		<div class="row">
			<article class="postcard dark">
				<div class="col-12 postcard__text">
					<h3 class="postcard__title text-success"><a href="#">Reject's comments</a></h3>
					
					<div class="postcard__preview-txt">

								<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 my-1 px-1"> 

									
										
										
									
								</div>
					
					</div>				
				</div>
			</article>
		</div>
		{%endif%} {% endcomment %}




<!--..........................................................Opertions................................................-->


		<div class="row">
			<article class="postcard dark">
				<div class="col-12 postcard__text">
					<h3 class="postcard__title text-success"><a href="#">Opertions</a></h3>
					
					<div class="postcard__preview-txt">

					{% if object.status == 'Select_expert' or object.status == 'Resubmit_to_director' %}
						<form id="submitform" class="form-control col-md-6 m-auto" method="POST" action="{% url 'change-status' %}">
							<input type="hidden" name="decide" value=1>
							<input type="hidden" name="id" value={{object.id}}>
							{%csrf_token%}
							<label for="expertbox" >Please select expert</label>
							<select name="expert_id" id="expertbox" class="form-control">
								{%for expert in experts %}
									<option value="{{expert.user.id}}">{{expert.user.username}}</option>
								{%endfor%}
							</select>
							<a type="button" class="text-white btn btn-success btn-sm" data-toggle="modal" data-target="#submitmodal" data-whatever="@mdo">Submit</a>
							<a type="button" class="text-white btn btn-warning btn-sm" data-toggle="modal" data-target="#revisemodal" data-whatever="@mdo">Revise</a>
							<a type="button" class="text-white btn btn-danger btn-sm" data-toggle="modal" data-target="#rejectmodal" data-whatever="@mdo">Reject</a>
						</form>
						<hr>
						
						
						
					{% endif %}
					</div>				
				</div>
			</article>
		</div>


	</div>
</section>



<!--.............................................Modal...........................................-->

<!--Revise Modal-->
<div class="modal fade" id="revisemodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
	  <div class="modal-content">
		  <div class="modal-header">
			  <h5 style="color:#000" class="modal-title" id="exampleModalLabel">Are you sure?</h5>
			  
			  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
				  <span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<form  method="POST" action="{% url 'change-status' %}">
					<input type="hidden" name="decide" value=0>
					<input type="hidden" name="id" value={{object.id}}>
					{%csrf_token%}
					<label style="color:#000" for="message-text " class="col-form-label">Reason:</label>
					<textarea name="comment" class="form-control" id="message-text" 
					placeholder="Please write your reason in this box"></textarea>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary btn-sms" data-dismiss="modal">Close</button>
					<button type="submit" class="btn btn-warning ">Revise</button>
				</div>
			</form>
	  </div>
	</div>
  </div>


<!--Reject Modal-->

  <div class="modal fade" id="rejectmodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
	  <div class="modal-content">
		  <div class="modal-header">
			  <h5 style="color:#000" class="modal-title" id="exampleModalLabel">Are you sure?</h5>
			  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
				  <span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<form  method="POST" action="{% url 'change-status' %}">
					<input type="hidden" name="decide" value='Reject'>
					<input type="hidden" name="id" value={{object.id}}>
					{%csrf_token%}
					<label style="color:#000" for="message-text " class="col-form-label">Reason:</label>
					<textarea name="comment" class="form-control" id="message-text"
					placeholder="Please write your reason in this box"></textarea>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary btn-sms" data-dismiss="modal">Close</button>
					<button type="submit" class="btn btn-danger ">Reject</button>
				</div>
			</form>
	  </div>
	</div>
  </div>

<!--submit Modal-->
  <div class="modal fade" id="submitmodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
	  <div class="modal-content">
		  <div class="modal-header">			  
			  <div class="modal-body">
				<h3 style="color:#000">Are you sure?</h3>
			  </div>
			</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary btn-sms" data-dismiss="modal">Close</button>
					<button id="submitbutton" type="submit" class="btn btn-danger ">Yes</button>
				</div>
	  </div>
	</div>
  </div>


    <script src="{% static 'workshop/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'workshop/js/workshop.js' %}"></script>
    <script src="{% static 'workshop/js/jquery-3.6.0.min.js' %}"></script>
    <script src="{% static 'workshop/js/myjs.js' %}"></script>

<script>
	$('#submitbutton').click(function(){
		$('#submitform').submit()
	})
</script>
{% endblock content %}